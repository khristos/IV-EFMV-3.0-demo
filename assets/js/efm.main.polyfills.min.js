/*! efm-viewer v3.0.0 | (c) 2020 Illustrated Verdict | Illustrated Verdict License | https://github.com/khristos/IV-EFMV */
/*! efm-viewer v3.0.0 | (c) 2020 Illustrated Verdict | Illustrated Verdict License | https://github.com/khristos/IV-EFMV */
var EFM={};EFM.Util={extend:function(){var t={};return Array.prototype.forEach.call(arguments,(function(e){for(var n in e){if(!e.hasOwnProperty(n))return;t[n]=e[n]}})),t},secondsToHms:function(t){t=Number(t);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return(e>0?e+":":"")+(n<10?"0":"")+n+":"+(r<10?"0":"")+r},hmsToMilliseconds:function(t,e,n){return(Math.floor(Number(60*t*60*1e3))||0)+(Math.floor(Number(60*e*1e3))||0)+(Math.floor(Number(1e3*n))||0)},debounce:function(t){var e;return function(){var n=this,r=arguments;e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame((function(){t.apply(n,r)}))}},emitEvent:function(t,e,n){if(n.settings.events){var r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(r)}},get:function(t,e,n){e=(function(t){if("string"!=typeof t)return t;var e=[];return t.split(".").forEach((function(t){t.split(/\[([^}]+)\]/g).forEach((function(t){t.length>0&&e.push(t)}))})),e})(e);for(var r=t,o=0;o<e.length;o++){if(!r[e[o]])return n;r=r[e[o]]}return r},getXHRData:function(t){var e=EFM.Util;atomic("./content/data/config.json",{method:"GET",headers:{accept:"application/json","Access-Control-Allow-Origin":"/"}}).then((function(n){e.setLocalData(n.data.configData.id,n.data),t()})).catch((function(n){console.log("error code: ",n.status),console.log("error description: ",n.statusText),JSONP.init({error:function(t){console.log("FAILED TO LOAD: "+t.url)},timeout:3e3}),JSONP.get("./content/data/config.js?otherParam=1",{param1:"a",param2:"b"},(function(n){console.log("JSONP: ",n),e.setLocalData(n.configData.id,n),t()}))}))},getLocalData:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):[]},setLocalData:function(t,e){localStorage.setItem(t,"string"==typeof e?e:JSON.stringify(e))},logConsole:function(t){console.log(t)},logTable:function(t){console.table(t)},ready:function(t,e){if("function"==typeof e)return"interactive"===t.readyState||"complete"===t.readyState?e():void t.addEventListener("DOMContentLoaded",e,!1)},
/*!
  * Create a new object composed of properties that meet specific criteria
  * (c) 2018 Chris Ferdinandi, MIT License, https://gomakethings.com
  * @param  {Object}   obj      The original object
  * @param  {Function} callback The callback test to run
  * @return {Object}            The new, filtered object
  */
objectFilter:function(t,e){"use strict";var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r],r,t)&&(n[r]=t[r]);return n},
/*!
  * More accurately check the type of a JavaScript object
  * (c) 2018 Chris Ferdinandi, MIT License, https://vanillajstoolkit.com/helpers/truetypeof/
  * @param  {Object} obj The object
  * @return {String}     The object type
  */
trueTypeOf:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},
/*!
  * Convert an array of objects into an object of objects
  * https://medium.com/dailyjs/rewriting-javascript-converting-an-array-of-objects-to-an-object-ec579cafbfc7
  * https://javascript.info/keys-values-entries#transforming-objects
  * @param  {Array} array       The array
  * @param  {String} keyField   The array field to use as key to object
  * @return {Object}            The object containing the strip information
  */
arrayToObject:function(t,e){return t.reduce((function(t,n){return t[n[e]]=n,t}),{})},getStrip:function(t,e){if(!t)return console.info("NO STRIP INFORMATION RECEIVED.");if(!e)return t[0];for(var n=0;n<t.length;++n)if(t[n].id===e)return t[n];return null},getStripTimes:function(t){if(!t)return null;var e=t._startHour,n=t._endHour,r=t._startMinute,o=t._endMinute,i=t._startSecond,s=t._endSecond;return{mediaStartTime:EFM.Util.hmsToMilliseconds(e,r,i),mediaEndTime:EFM.Util.hmsToMilliseconds(n,o,s)}}},EFM.Util.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},
/*!
 * Get the first matching element in the DOM
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * // https://vanillajstoolkit.com/helpers/
 * @param  {String} selector The element selector
 * @param  {Node}   parent   The parent to search in [optional]
 * @return {Node}            The element
 */
EFM.Util.$=function(t,e){return(e||document).querySelector(t)},
/*!
 * Get an array of all matching elements in the DOM
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {String} selector The element selector
 * @param  {Node}   parent   The parent to search in [optional]
 * @return {Array}           The elements
 */
EFM.Util.$$=function(t,e){return Array.prototype.slice.call((e||document).querySelectorAll(t))},EFM.Util.getNormalizedPageName=function(t){var e=t.toLowerCase().trim(),n=e.indexOf(".html");return n>-1&&(e=e.substr(0,n)),(e=e.replace(/\s+/g,"_").replace(/[^a-z0-9-_]/g,""))+".html"},EFM.Util.transition=function(t,e,n){return t.data.machine.states[e].on[n]||e},Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null}),(function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t})(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0})
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */,(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()})(this,(function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,r=void 0,o=void 0,i=function(t,e){h[n]=t,h[n+1]=e,2===(n+=2)&&(o?o(p):_())};var s="undefined"!=typeof window?window:void 0,a=s||{},c=a.MutationObserver||a.WebKitMutationObserver,u="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<n;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}n=0}var d,v,m,y,_=void 0;function g(t,e){var n=this,r=new this.constructor(E);void 0===r[w]&&x(r);var o=n._state;if(o){var s=arguments[o-1];i((function(){return L(o,r,s,n._result)}))}else P(n,r,t,e);return r}function b(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return T(e,t),e}u?_=function(){return process.nextTick(p)}:c?(v=0,m=new c(p),y=document.createTextNode(""),m.observe(y,{characterData:!0}),_=function(){y.data=v=++v%2}):l?((d=new MessageChannel).port1.onmessage=p,_=function(){return d.port2.postMessage(0)}):_=void 0===s&&"function"==typeof require?(function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(p)}:f()}catch(t){return f()}})():f();var w=Math.random().toString(36).substring(2);function E(){}var M=void 0,S=1,A=2;function O(e,n,r){n.constructor===e.constructor&&r===g&&n.constructor.resolve===b?(function(t,e){e._state===S?C(t,e._result):e._state===A?F(t,e._result):P(e,void 0,(function(e){return T(t,e)}),(function(e){return F(t,e)}))})(e,n):void 0===r?C(e,n):t(r)?(function(t,e,n){i((function(t){var r=!1,o=(function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}})(n,e,(function(n){r||(r=!0,e!==n?T(t,n):C(t,n))}),(function(e){r||(r=!0,F(t,e))}),t._label);!r&&o&&(r=!0,F(t,o))}),t)})(e,n,r):C(e,n)}function T(t,e){if(t===e)F(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=e),null===r||"object"!==o&&"function"!==o)C(t,e);else{var n=void 0;try{n=e.then}catch(e){return void F(t,e)}O(t,e,n)}var r,o}function j(t){t._onerror&&t._onerror(t._result),N(t)}function C(t,e){t._state===M&&(t._result=e,t._state=S,0!==t._subscribers.length&&i(N,t))}function F(t,e){t._state===M&&(t._state=A,t._result=e,i(j,t))}function P(t,e,n,r){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=e,o[s+S]=n,o[s+A]=r,0===s&&t._state&&i(N,t)}function N(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?L(n,r,o,i):o(i);t._subscribers.length=0}}function L(e,n,r,o){var i=t(r),s=void 0,a=void 0,c=!0;if(i){try{s=r(o)}catch(t){c=!1,a=t}if(n===s)return void F(n,new TypeError("A promises callback cannot return that same promise."))}else s=o;n._state!==M||(i&&c?T(n,s):!1===c?F(n,a):e===S?C(n,s):e===A&&F(n,s))}var D=0;function x(t){t[w]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var U=(function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[w]||x(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&C(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===M&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(t){s=!0,i=t}if(o===g&&t._state!==M)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===I){var a=new n(E);s?F(a,i):O(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===M&&(this._remaining--,t===A?F(r,n):this._result[e]=n),0===this._remaining&&C(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,(function(t){return n._settledAt(S,e,t)}),(function(t){return n._settledAt(A,e,t)}))},t})();var I=(function(){function e(t){this[w]=D++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&(function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")})(),this instanceof e?(function(t,e){try{e((function(e){T(t,e)}),(function(e){F(t,e)}))}catch(e){F(t,e)}})(this,t):(function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")})())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e})();return I.prototype.then=g,I.all=function(t){return new U(this,t).promise},I.race=function(t){var n=this;return e(t)?new n((function(e,r){for(var o=t.length,i=0;i<o;i++)n.resolve(t[i]).then(e,r)})):new n((function(t,e){return e(new TypeError("You must pass an array to race."))}))},I.resolve=b,I.reject=function(t){var e=new this(E);return F(e,t),e},I._setScheduler=function(t){o=t},I._setAsap=function(t){i=t},I._asap=i,I.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=I},I.Promise=I,I}));